<p align="center">
  <img src="../Logo.jpg" width="512" height="384" alt="Logo">
</p>

<div align="center">

[README in English](../README.md)

</div>

<div align="center"> 
 
![License](https://img.shields.io/badge/License-GPL--3.0-blue)
![.NET Version](https://img.shields.io/badge/.NET-8.0-purple)
![Telegram Bot API](https://img.shields.io/badge/Telegram%20Bot%20API-22.1.3-green)
 
</div>

**TelegramMediaRelayBot** — это селфхостинг-бот для Telegram, который позволяет автоматически скачивать и пересылать видео с множества [платформ](https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md) (благодаря [yt-dlp](https://github.com/yt-dlp/yt-dlp/tree/master)) вам и вашим контактам. Бот упрощает процесс обмена медиафайлами, избавляя от необходимости вручную скачивать и отправлять видео тем кто не использует ту или иную платформу.



## Основные функции

- **Скачивание видео**: Поддержка множества платформ через **yt-dlp** (возможно в будущем будет добавлен и **gallery-dl**).
- **Рассылка контактам**: Возможность добавлять контакты внутри бота, которым будут автоматически пересылаться скачанные видео.
- **Прокси и Tor**: Поддержка прокси (включая Tor) для скачивания видео.
- **Логирование**: Логирование всех действий в консоль (в будущем — и в файл).
- **Гибкость**: В будущем будет реализована система выбора контактов для рассылки и более детальное управление ими, улучшена работа бота в группах и других параметров.



## Установка и настройка

### Требования
- **.NET 8.0**
- **Telegram Bot Token** (получить можно у [BotFather](https://core.telegram.org/bots#botfather))
- **mysql-server**  

### Установка
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ZenonEl/TelegramMediaRelayBot.git
   cd TelegramMediaRelayBot
   ```
2. Установите зависимости:
   ```bash
   dotnet restore
   ```
3. Настройте конфигурацию:
   - Создайте файл `appsettings.json` в корне проекта из файла appsettings.json.example. В нём обязательно нужно установить следующие параметры:
     ```json
     {
        "TelegramBotToken": "1234:abcd",
        "SqlConnectionString": "Server=IPAddress;Database=DatabaseName;User ID=UserName;Password=UserPassword;",
     }
     ```
   - TelegramBotToken получите из телеграм бота BotFather. 
   - IPAddress — это ip по которому доступна ваша БД. К примеру: 127.0.0.1 если она работает на том же устройстве где будет запускаться ваш Бот 
   - DatabaseName — имя вашей БД которое вы указали в mysql при создании БД.
   - UserName — имя пользователя что существует в mysql и имеет доступ к ранее указанной БД.
   - UserPassword — пароль пользователя БД.
4. Запустите бота:
   ```bash
   dotnet run
   ```



## Использование

### Поддерживаемые команды
Л — личные чаты 
Г — групповые чаты
- **/start** — Запуск бота и отображение главного меню. (Л)
- **/help** — Получить справку по использованию бота. (Л/Г)
- **/link** — Получить видео по ссылке внутри группового чата. (Г)

### Добавление контактов
1. Получите свою уникальную ссылку в главном меню (кнопка **Моя ссылка**) и поделитесь ей.
   - Или попросите вашего знакомого поделиться своей ссылкой чтобы вы могли его добавить.
2. Используйте кнопку **Добавить контакт** в главном меню и полученную ссылку от другого человека, чтобы добавить его в ваши контакты.
3. После, ожидайте пока ваш контакт получит уведомление и подтвердит запрос на добавление. После этого вы сможете отсылать друг другу видео.

### Скачивание и рассылка видео
1. Отправьте боту ссылку на видео.
2. Бот скачает видео и отправит его вам.
3. Если у вас есть добавленные контакты, видео будет автоматически переслано им (в будущем можно будет настраивать выбор тех кому рассылать).



## Планы на будущее
- (Пока что на рассмотрении) Добавление поддержки **gallery-dl** для скачивания медиа с ещё большего количества платформ.
- Более детальное управление контактами (удаление, редактирование и тд).
- Создание и управление группами контактов внутри бота.
- (Пока что на рассмотрении) Поддержка форматирования текста.
- Возможность пересоздать личную ссылку внутри бота (с возможностью удаления всех контактов или же сохраняя их).
- ~~Возможность включить фильтр для доступа к боту (к примеру, начать пользоваться ботом можно будет только при использовании чей то ссылки-рефералки).~~
- (Пока что на рассмотрении) Административные функции управления ботом внутри него же.
- ~~Создание готового исполняемого файла.~~
- И другие разные улучшения и исправления ✨

## Логирование
Бот логирует все действия в консоль. В будущем планируется добавление логирования в файл. Логи можно настроить в файле настроек.



## Лицензия
Проект распространяется под лицензией **AGPL-3.0**. Подробности можно найти в файле [LICENSE](LICENSE).



## Обратная связь
Если у вас есть вопросы, предложения или вы нашли баг, пожалуйста, создайте [issue](https://github.com/ZenonEl/TelegramMediaRelayBot/issues) в репозитории.



## Вклад в проект
Пока проект не принимает contributions, но в будущем это может измениться. Следите за обновлениями!
